(this["webpackJsonprecipeshoppinglist2.0"]=this["webpackJsonprecipeshoppinglist2.0"]||[]).push([[0],{37:function(e,n,t){},38:function(e,n,t){},46:function(e,n,t){},47:function(e,n,t){},48:function(e,n,t){},49:function(e,n,t){},50:function(e,n,t){},67:function(e,n,t){},68:function(e,n,t){},70:function(e,n,t){},74:function(e,n,t){"use strict";t.r(n);var i=t(0),c=t.n(i),r=t(19),a=t.n(r),s=(t(37),t(38),t(1));function o(){return Object(s.jsx)("div",{className:"footer",children:"Made by Joe"})}var l=t(18),d=t(3),u=t(15),j=t(6),b=t(11),p=t(4),h=t(14),f=JSON.parse(localStorage.getItem("storedShopping"))||[],g=Object(h.b)({name:"shoppingList",initialState:f,reducers:{shoppingListAdded:{reducer:function(e,n){e.unshift(n.payload)},prepare:function(e){return{payload:Object(p.a)(Object(p.a)({},e),{},{id:Math.random().toString(36).substr(2,9)})}}},shoppingListRemoved:function(e,n){return e.filter((function(e){return e.id!==n.payload}))},shoppingIngredientRemoved:function(e,n){var t=n.payload.split(" "),i=Object(j.a)(t,3),c=i[0],r=i[1],a=i[2],s=e.map((function(e){if(e.id===c){var n=e.ingredients.filter((function(e,n){return e+n!==r+a}));return e.ingredients=n,e}return e}));e=s}}}),m=g.actions,O=g.reducer,v=m.shoppingListAdded,x=m.shoppingListRemoved,N=m.shoppingIngredientRemoved,R=O,k=(t(46),function(e){var n=e.inputList,t=e.setInputList,c=e.label,r=function(){t([].concat(Object(u.a)(n),[{ingredient:"",ingredientRef:null}]))};return Object(i.useEffect)((function(){n[n.length-1].ingredientRef&&n[n.length-1].ingredientRef.focus()}),[n.length]),n.map((function(e,i){return Object(s.jsxs)("div",{className:"ingredient-input-group",children:[Object(s.jsxs)("div",{className:"group",children:[Object(s.jsx)("input",{id:e.ingredient+i,name:"ingredient",label:c||"Ingredient",onChange:function(e){return function(e,i){var c=e.target,r=c.name,a=c.value,s=Object(u.a)(n);s[i][r]=a,t(s)}(e,i)},value:e.ingredient,onKeyDown:function(e){"Enter"===e.key&&r()},ref:function(n){return e.ingredientRef=n},autoComplete:"off",className:"form-input"}),c?Object(s.jsx)("label",{htmlFor:e.ingredient+i,className:"".concat(e.ingredient.length?"shrink":""," form-input-label"),children:c}):null]}),Object(s.jsxs)("div",{className:"button-group",children:[n.length-1===i&&Object(s.jsx)("div",{className:"ingredient-button",children:Object(s.jsx)("button",{onClick:r,className:"add",children:"\u2715"})}),1!==n.length&&Object(s.jsx)("button",{onClick:function(){return function(e){var i=Object(u.a)(n);i.splice(e,1),t(i)}(i)},className:"ingredient-button delete",children:"\u2715"})]})]},i)}))}),w=function(e){var n=e.setOddBits,t=e.oddBits,c=Object(i.useState)(t.map((function(e){return{ingredient:e,ingredientRef:null}}))),r=Object(j.a)(c,2),a=r[0],o=r[1];return Object(i.useEffect)((function(){var e=a.map((function(e,n){return e.ingredient}));n(e)}),[a]),Object(s.jsxs)("article",{className:"card",children:[Object(s.jsx)("div",{className:"card-header",children:Object(s.jsx)("h2",{className:"card-title",children:"Odd Bits"})}),Object(s.jsx)("div",{className:"card-body ",children:Object(s.jsx)(k,{inputList:a,setInputList:o,label:"Odd bit"})})]})},y=(t(47),function(e){var n=e.onClick,t=e.value,i=e.children;return Object(s.jsx)("button",{className:"custom-button",onClick:n,value:t,children:i})}),S=(t(48),function(e){var n=e.recipeId,t=e.ingredients,i=e.pathname,c=e.ingredientButton;return t?Object(s.jsx)("div",{className:"ingredient-list",children:t.map((function(e,t){return Object(s.jsxs)("div",{className:"ingredient",children:[Object(s.jsx)("div",{htmlFor:e,className:"ingredient-text",children:e}),"/"===i?Object(s.jsx)("button",{className:"ingredient-button",onClick:c,name:n+" "+e+" "+t,value:e+t,children:"\u2715"}):Object(s.jsx)("div",{})]},n+e+t)}))}):null});t(49);var C=function(e){var n=e.recipe,t=e.button,i=e.ingredientButton,c=e.removeFromRecipes,r=e.editRecipe,a=window.location.pathname;return Object(s.jsxs)("article",{className:"card",children:[Object(s.jsxs)("div",{className:"card-header",children:[Object(s.jsx)("h2",{className:"card-title",children:n.name}),n.link?Object(s.jsx)("a",{className:"title-link",target:"_blank",rel:"noopener noreferrer",href:n.link,children:"Link"}):null,Object(s.jsxs)("div",{className:"card-header-buttons",children:["/recipes"===a?Object(s.jsx)("button",{value:n.id,onClick:r,className:"title-link",children:"Edit"}):null,Object(s.jsx)("button",{href:"#",value:n.id,onClick:function(e){return c(e)},className:" title-link",children:"\u2715"})]})]}),n.ingredients.length?Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)(S,{recipeId:n.id,ingredients:n.ingredients,pathname:a,ingredientButton:i}),Object(s.jsx)("button",{className:"card-button",onClick:t,value:n.id,children:"/"===a?"Done":"Add to Shopping List"})]}):null]})},L=t(31),A=t.n(L);t(50);var B=function(e){var n=e.recipes,t=e.removeFromRecipes,i=e.cardButton,c=e.editRecipeCardButton,r=e.ingredientButton,a={default:n.length<3?n.length:3,1400:2,1e3:1};return Object(s.jsx)("div",{className:"card-list fade-in",children:Object(s.jsx)(A.a,{breakpointCols:a,className:"masonry-grid",columnClassName:"masonry-grid_column",children:n.map((function(e){return Object(s.jsx)(C,{removeFromRecipes:t,recipe:e,button:i,editRecipe:c,ingredientButton:r},e.id)}))})})};var I=function(){var e=Object(b.c)((function(e){return e.shoppingList})),n=Object(b.b)(),t=Object(i.useState)(JSON.parse(localStorage.getItem("storedOdd"))||[""]),c=Object(j.a)(t,2),r=c[0],a=c[1];Object(i.useEffect)((function(){localStorage.setItem("storedOdd",JSON.stringify(r))}),[r]),Object(i.useEffect)((function(){localStorage.setItem("storedShopping",JSON.stringify(e))}),[e]);var o=e.map((function(e){return e.name})),l=function(t){t.preventDefault();var i=e.find((function(e){return e.id===t.target.value}));n(x(i.id))};return Object(s.jsxs)("div",{className:"page fade-in",children:[Object(s.jsxs)("div",{className:"page-header",children:[Object(s.jsx)("h2",{className:"title",children:"Shopping List"}),o.includes("Shopping List")||0===e.length?null:Object(s.jsx)(y,{value:"AddRecipe",onClick:function(t){t.preventDefault();var i=e.map((function(e,n){return e.ingredients})).flat().sort(),c=Object(u.a)(new Set(i)).map((function(e){return[e,i.filter((function(n){return n===e})).length]})).map((function(e,n){return[e[0]+"  X"+e[1]]}));n(v({id:"sort",name:"Shopping List",ingredients:c,link:""}))},children:"Sort shopping list"}),Object(s.jsx)(w,{setOddBits:a,oddBits:r})]}),0===e.length?Object(s.jsxs)("div",{className:"recipes-empty",children:[Object(s.jsx)("h2",{children:"No recipes in your shopping list."}),Object(s.jsx)("h2",{children:"Go to Recipes to add some!"})]}):Object(s.jsx)(B,{recipes:e,removeFromRecipes:l,cardButton:l,ingredientButton:function(e){e.preventDefault();var t=e.target.name;n(N(t))}})]})},E=t(13),D=t(21),F=t.n(D),J=function(e,n){D.store.addNotification({title:e,message:n,type:"success",insert:"bottom",container:"bottom-center",dismiss:{duration:2e3}})},W=JSON.parse(localStorage.getItem("storedRecipes"))||[],M=Object(h.b)({name:"recipes",initialState:W,reducers:{recipeAdded:function(e,n){e.push(n.payload)},recipeRemoved:function(e,n){return e.filter((function(e){return e.id!==n.payload}))},recipeEdited:function(e,n){return e.map((function(e){return e.id===n.payload.id?n.payload:e}))}}}),P=M.actions,T=M.reducer,U=P.recipeAdded,G=P.recipeRemoved,_=P.recipeEdited,K=T,X=t(32),$=(t(67),function(e){var n=e.handleChange,t=e.label,i=Object(X.a)(e,["handleChange","label"]);return Object(s.jsxs)("div",{className:"group",children:[Object(s.jsx)("input",Object(p.a)(Object(p.a)({onChange:n},i),{},{className:"form-input"})),t?Object(s.jsx)("label",{className:"".concat(i.value.length?"shrink":""," form-input-label"),children:t}):null]})}),q=(t(68),function(e){var n=e.searchField,t=e.searchChange;return Object(s.jsx)("div",{className:"searchbox",children:Object(s.jsx)($,{type:"search",label:"Search Recipes",onChange:t,value:n})})}),z=function(){var e=Object(i.useState)({id:"",name:"",link:"",ingredients:[]}),n=Object(j.a)(e,2),t=n[0],c=n[1],r=Object(i.useState)([{ingredient:"",ingredientRef:null}]),a=Object(j.a)(r,2),o=a[0],l=a[1],d=Object(i.useState)(""),u=Object(j.a)(d,2),h=u[0],f=u[1],g=Object(b.c)((function(e){return e.recipes})),m=Object(b.b)();Object(i.useEffect)((function(){localStorage.setItem("storedRecipes",JSON.stringify(g))}),[g]);var O=function(e){c((function(n){return Object(p.a)(Object(p.a)({},n),{},Object(E.a)({},e.target.name,e.target.value))}))},x=g.filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())}));return Object(i.useEffect)((function(){c((function(e){return Object(p.a)(Object(p.a)({},e),{},{ingredients:o.map((function(e){return e.ingredient})).filter(Boolean)})}))}),[o]),Object(i.useEffect)((function(){var e=[];if(""===t.id)return[{ingredient:"",ingredientRef:null}];e=t.ingredients.map((function(e){return{ingredient:e,ingredientRef:null}})),l(e)}),[t.ingredients.length]),Object(s.jsxs)("div",{className:"page fade-in",children:[Object(s.jsxs)("div",{className:"page-header",children:[Object(s.jsx)("h2",{className:"title",children:"Recipe List"}),""===t.id?null:Object(s.jsxs)("article",{className:"card",children:[Object(s.jsx)("h2",{children:"Edit Recipe"}),Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)($,{name:"name",label:"Recipe Name",handleChange:O,value:t.name,autoComplete:"off"}),Object(s.jsx)($,{name:"link",label:"Link",handleChange:O,value:t.link,autoComplete:"off"}),Object(s.jsx)(k,{inputList:o,setInputList:l})]}),Object(s.jsx)(y,{value:"editRecipe",onClick:function(e){e.preventDefault(),console.log(e),m(_(t)),J(t.name,"edited"),c({id:"",name:"",link:"",ingredients:[]}),l([{ingredient:"",ingredientRef:null}])},children:"Done"})]}),Object(s.jsx)(q,{searchChange:function(e){f(e.target.value)},searchField:h})]}),x.length?Object(s.jsx)(B,{recipes:x,removeFromRecipes:function(e){if(e.preventDefault(),window.confirm("Are you sure you want to permanently delete this recipe?")){var n=e.target.value.split(" ")[0];m(G(n)),f("")}},cardButton:function(e){e.preventDefault();var n=e.target.value;g.find((function(e){e.id===n&&(m(v(e)),J(e.name,"Added to your shopping list"))})),f("")},editRecipeCardButton:function(e){e.preventDefault(),console.log(e);var n=g.find((function(n){return n.id===e.target.value}));c(n)}}):h.length?Object(s.jsx)("h2",{className:"title",children:"Recipe not found."}):Object(s.jsxs)("div",{className:"recipes-empty",children:[Object(s.jsx)("h2",{children:"No recipes in your recipe list."}),Object(s.jsx)("h2",{children:"Go to Add a recipe to add some!"})]})]})},H=function(){return Math.random().toString(36).substr(2,9)};var Q=function(){var e=Object(i.useState)([{ingredient:"",ingredientRef:null}]),n=Object(j.a)(e,2),t=n[0],c=n[1],r=Object(i.useState)({id:H(),name:"",link:"",ingredients:[]}),a=Object(j.a)(r,2),o=a[0],l=a[1],d=Object(b.b)(),u=function(e){var n=e.target,t=n.name,i=n.value;l(Object(p.a)(Object(p.a)({},o),{},Object(E.a)({},t,i)))};return Object(i.useEffect)((function(){var e=t.map((function(e,n){return e.ingredient.toLowerCase()})).filter(Boolean);l(Object(p.a)(Object(p.a)({},o),{},{ingredients:e}))}),[t]),Object(s.jsx)("div",{className:"page fade-in",children:Object(s.jsxs)("div",{className:"page-header",children:[Object(s.jsx)("h2",{className:"title",children:"New Recipe"}),Object(s.jsxs)("div",{className:"card",children:[Object(s.jsx)("h3",{children:"Add a new recipe here"}),Object(s.jsx)($,{name:"name",label:"Recipe Name",handleChange:u,value:o.name}),Object(s.jsx)($,{name:"link",label:"Link",handleChange:u,value:o.link,autoComplete:"off"}),Object(s.jsx)(k,{inputList:t,setInputList:c}),Object(s.jsx)(y,{value:"AddRecipe",onClick:function(e){e.preventDefault(),d(U(o)),J(o.name,"Added to Recipes"),l({id:H(),name:"",link:"",ingredients:[]}),c([{ingredient:"",ingredientRef:null}])},children:"Add Recipe"})]}),Object(s.jsx)("div",{className:"center ph1 tc w-50-ns w-90"})]})})};t(69),t(70);function V(){return Object(s.jsxs)("div",{className:"app fade-in",children:[Object(s.jsx)(F.a,{}),Object(s.jsxs)(l.a,{children:[Object(s.jsx)("header",{className:"app-header",children:Object(s.jsxs)("nav",{className:"nav",children:[Object(s.jsx)(l.b,{className:"nav-link",to:"/",children:"Shopping list"}),Object(s.jsx)(l.b,{className:"nav-link",to:"/recipes",children:"Recipes"}),Object(s.jsx)(l.b,{className:"nav-link",to:"/newrecipe",children:"Add a recipe"})]})}),Object(s.jsx)("div",{className:"body",children:Object(s.jsxs)(d.c,{children:[Object(s.jsx)(d.a,{path:"/recipes",children:Object(s.jsx)(z,{})}),Object(s.jsx)(d.a,{path:"/newrecipe",children:Object(s.jsx)(Q,{})}),Object(s.jsx)(d.a,{path:"/",children:Object(s.jsx)(I,{})})]})})]}),Object(s.jsx)(o,{})]})}var Y=Object(h.a)({reducer:{recipes:K,shoppingList:R}}),Z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(b.a,{store:Y,children:Object(s.jsx)(V,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/PANTRI",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/PANTRI","/service-worker.js");Z?(!function(e,n){fetch(e).then((function(t){var i=t.headers.get("content-type");404===t.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ee(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ee(n,e)}))}}()}},[[74,1,2]]]);
//# sourceMappingURL=main.5725bb0b.chunk.js.map