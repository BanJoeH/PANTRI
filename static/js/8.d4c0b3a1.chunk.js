(this["webpackJsonprecipeshoppinglist2.0"]=this["webpackJsonprecipeshoppinglist2.0"]||[]).push([[8],{467:function(e,t,n){"use strict";n.r(t);var r=n(66),i=n(40),c=n.n(i),s=n(67),o=n(1),a=n(68),u=n(26),l=n(450),d=n(2),p=function(){var e=Object(u.b)((function(e){return e.firebase.profile.oddBits})),t=Object(u.b)((function(e){return e.firebase.auth})).uid,n=Object(a.useFirestore)(),i=Object(o.useState)([{ingredient:"",ingredientRef:null}]),c=Object(r.a)(i,2),s=c[0],p=c[1];Object(o.useEffect)((function(){(null===e||void 0===e?void 0:e.length)&&p(e.map((function(e){return{ingredient:e,ingredientRef:null}})))}),[e]);var b=function(e,t){var r=e.map((function(e){return e.ingredient}));n.collection("users").doc(t).set({oddBits:r},{merge:!0})};return Object(d.jsxs)("article",{className:"card",children:[Object(d.jsx)("div",{className:"card-header",children:Object(d.jsx)("h2",{className:"card-title",children:"Odd Bits"})}),Object(d.jsx)("div",{className:"card-body ",children:Object(d.jsx)(l.a,{inputList:s,setInputList:p,lossOfFocus:function(){b(s,t)},label:"Odd bit"})})]})},b=n(451),j=n(452),f=n(53),O=n(453),g=n(443),h=function(e){var t=e.recipes,n=Object(o.useState)(!1),i=Object(r.a)(n,2),c=i[0],s=i[1],a=Object(o.useState)({id:"sort",name:"Sorted Shopping List",link:"",ingredients:[]}),u=Object(r.a)(a,2),l=u[0],p=u[1],b=function(){s(!c)},h=function(e,t){var n=e.target.name.split("&")[1],r=t.filter((function(e){return e!==n}));p(Object(f.a)(Object(f.a)({},l),{},{ingredients:r}))},v=function(e){var t=e.map((function(e){return e.ingredients})).flat().sort();return Object(j.a)(new Set(t)).map((function(e){return[e,t.filter((function(t){return t===e})).length]})).map((function(e){return e[0]+"  X"+e[1]}))};return c?Object(d.jsx)(O.a,{recipe:l,removeFromRecipes:b,button:b,ingredientButton:function(e){e.preventDefault();var t=l.ingredients;h(e,t)}}):Object(d.jsx)("div",{style:{margin:"0 5%"},children:Object(d.jsx)(g.a,{value:"Sort shopping",onClick:function(e){e.preventDefault();var n=v(t);p((function(e){return Object(f.a)(Object(f.a)({},e),{},{ingredients:n})})),b()},children:"Sort Shopping"})})},v=n(447),m=n(448),x=n(449),S=n(7);t.default=function(){var e=Object(u.b)((function(e){return e.firebase.auth})).uid,t=Object(u.b)((function(e){return e.firestore.status.requesting.shoppingList})),n=Object(S.g)();Object(a.useFirestoreConnect)({collection:"users/".concat(e,"/shoppingList"),storeAs:"shoppingList"});var i=Object(a.useFirestore)(),o=Object(u.b)((function(e){return e.firestore.ordered.shoppingList})),l=i.collection("users").doc(e).collection("shoppingList"),j=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.value,r=Object(v.b)(n,o),e.next=5,Object(v.d)(r,l);case 5:"error"===(i=e.sent)?Object(v.c)("Error","Error removing recipe, please try again","danger"):Object(v.c)(i.name,"Deleted","success");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!t&&Object(d.jsxs)(m.a,{children:[Object(d.jsxs)(x.a,{title:"Shopping List",children:[Object(d.jsx)(p,{}),(null===o||void 0===o?void 0:o.length)?Object(d.jsx)(h,{recipes:o}):null]}),(null===o||void 0===o?void 0:o.length)?Object(d.jsx)(b.a,{recipes:o,removeFromRecipes:j,cardButton:j,ingredientButton:function(e){e.preventDefault();var t=e.target.name.split("&"),n=Object(r.a)(t,3),i=n[0],c=n[2],s=Object(v.b)(i,o).ingredients.slice();s.splice(c,1),function(e,t,n){n.doc(e).update({ingredients:t},{merge:!0})}(i,s,l)}}):Object(d.jsxs)("div",{className:"card",onClick:function(){n.push("/PANTRI/recipes")},style:{cursor:"pointer"},children:[Object(d.jsx)("h2",{children:"No recipes in your shopping list."}),Object(d.jsx)("h2",{children:"Go to Recipes to add some!"})]})]})}}}]);
//# sourceMappingURL=8.d4c0b3a1.chunk.js.map