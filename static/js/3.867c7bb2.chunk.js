(this["webpackJsonprecipeshoppinglist2.0"]=this["webpackJsonprecipeshoppinglist2.0"]||[]).push([[3],{444:function(e,n,t){"use strict";t(1),t(446);var i=t(2);n.a=function(e){var n=e.onClick,t=e.isGoogleSignIn,r=e.value,c=e.children;return Object(i.jsx)("button",{className:"".concat(t?"google-sign-in":""," custom-button"),onClick:n,value:r,children:c})}},445:function(e,n,t){"use strict";var i=t(53);function r(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},c=Object.keys(e);for(i=0;i<c.length;i++)t=c[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(i=0;i<c.length;i++)t=c[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}t(1),t(447);var c=t(2);n.a=function(e){var n=e.handleChange,t=e.label,a=r(e,["handleChange","label"]);return Object(c.jsxs)("div",{className:"group",children:[Object(c.jsx)("input",Object(i.a)(Object(i.a)({onChange:n},a),{},{className:"form-input"})),t?Object(c.jsx)("label",{className:"".concat(a.value.length?"shrink":""," form-input-label"),children:t}):null]})}},446:function(e,n,t){},447:function(e,n,t){},448:function(e,n,t){"use strict";var i=t(449),r=t(1),c=(t(451),t(2));n.a=function(e){var n=e.inputList,t=e.setInputList,a=e.lossOfFocus,o=e.label,l=void 0===o?"Ingredient":o,s=function(){t([].concat(Object(i.a)(n),[{ingredient:"",ingredientRef:null}]))};return Object(r.useEffect)((function(){n[n.length-1].ingredientRef&&n[n.length-1].ingredientRef.focus()}),[n.length]),n.map((function(e,r){return Object(c.jsxs)("div",{className:"ingredient-input-group",children:[Object(c.jsxs)("div",{className:"group",children:[Object(c.jsx)("input",{id:e.ingredient+r,name:"ingredient",label:l,onChange:function(e){return function(e,r){var c=e.target,a=c.name,o=c.value,l=Object(i.a)(n);l[r][a]=o,t(l)}(e,r)},value:e.ingredient,onKeyDown:function(e){"Enter"===e.key&&s()},ref:function(n){return e.ingredientRef=n},autoComplete:"off",className:"form-input",onBlur:a}),Object(c.jsx)("label",{htmlFor:e.ingredient+r,className:"".concat(e.ingredient.length?"shrink":""," form-input-label"),children:l})]}),Object(c.jsxs)("div",{className:"button-group",children:[n.length-1===r&&Object(c.jsx)("div",{className:"ingredient-button",children:Object(c.jsx)("button",{onClick:s,className:"add",children:"\u2715"})}),1!==n.length&&Object(c.jsx)("button",{onClick:function(){return function(e){var r=Object(i.a)(n);r.splice(e,1),t(r)}(r)},className:"ingredient-button delete",children:"\u2715"})]})]},r)}))}},449:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var i=t(97);var r=t(147);function c(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},450:function(e,n,t){"use strict";var i=t(66),r=t(1),c=(t(453),t(2)),a=function(e){var n=e.recipeId,t=e.ingredients,i=e.pathname,r=e.ingredientButton;return t?Object(c.jsx)("div",{className:"ingredient-list",children:t.map((function(e,t){return null!==e?Object(c.jsxs)("div",{className:"ingredient",children:[Object(c.jsx)("div",{htmlFor:e,className:"ingredient-text",children:e}),"/PANTRI/shoppingList"===i?Object(c.jsx)("button",{className:"ingredient-button",onClick:r,name:n+"&"+e+"&"+t,children:"\u2715"}):Object(c.jsx)("div",{})]},n+e+t):null}))}):null},o=(t(454),t(444));n.a=function(e){var n=e.recipe,t=e.button,l=e.ingredientButton,s=e.removeFromRecipes,u=e.editRecipe,d=Object(r.useState)(!1),f=Object(i.a)(d,2),b=f[0],p=f[1],m=window.location.pathname;return Object(c.jsxs)("article",{className:"card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("h2",{className:"card-title",onClick:function(e){e.preventDefault(),p((function(e){return!e}))},children:n.name}),Object(c.jsxs)("div",{className:"card-header-buttons",children:[n.link?Object(c.jsx)("a",{className:"title-link",target:"_blank",rel:"noopener noreferrer",href:n.link,children:"Link"}):null,"/PANTRI/recipes"===m?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{value:n.id,onClick:t,className:"rotate title-link",children:"\u2715"}),Object(c.jsx)("button",{value:n.id,onClick:u,className:"title-link",children:"Edit"})]}):null,Object(c.jsx)("button",{href:"#",value:n.id,onClick:function(e){return s(e)},className:" title-link",children:"\u2715"})]})]}),b?Object(c.jsxs)("div",{className:"card-body fade-in",children:[n.ingredients.length?Object(c.jsx)(a,{recipeId:n.id,ingredients:n.ingredients,pathname:m,ingredientButton:l}):Object(c.jsx)("div",{children:"No ingredients"}),Object(c.jsx)(o.a,{onClick:t,value:n.id,children:"/PANTRI/shoppingList"===m?"Done":"Add to Shopping List"})]}):null]})}},451:function(e,n,t){},452:function(e,n,t){"use strict";var i=t(1),r=t.n(i),c=t(450),a=t(455),o=t.n(a),l=(t(456),t(2));function s(e){var n=e.recipes,t=e.removeFromRecipes,i=e.cardButton,r=e.editRecipeCardButton,a=e.ingredientButton,s={default:n.length<3?n.length:3,1400:2,1e3:1};return Object(l.jsx)("div",{className:"card-list fade-in",children:Object(l.jsx)(o.a,{breakpointCols:s,className:"masonry-grid",columnClassName:"masonry-grid_column",children:n.map((function(e){return null!==e?Object(l.jsx)(c.a,{removeFromRecipes:t,recipe:e,button:i,editRecipe:r,ingredientButton:a},e.id):null}))})})}n.a=r.a.memo(s)},453:function(e,n,t){},454:function(e,n,t){},455:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(1),l=(i=o)&&i.__esModule?i:{default:i};var s={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},u=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.reCalculateColumnCount=t.reCalculateColumnCount.bind(t),t.reCalculateColumnCountDebounce=t.reCalculateColumnCountDebounce.bind(t);var i=void 0;return i=t.props.breakpointCols&&t.props.breakpointCols.default?t.props.breakpointCols.default:parseInt(t.props.breakpointCols)||2,t.state={columnCount:i},t}return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),a(n,[{key:"componentDidMount",value:function(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}},{key:"componentDidUpdate",value:function(){this.reCalculateColumnCount()}},{key:"componentWillUnmount",value:function(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}},{key:"reCalculateColumnCountDebounce",value:function(){var e=this;window&&window.requestAnimationFrame?(window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame((function(){e.reCalculateColumnCount()}))):this.reCalculateColumnCount()}},{key:"reCalculateColumnCount",value:function(){var e=window&&window.innerWidth||1/0,n=this.props.breakpointCols;"object"!==("undefined"===typeof n?"undefined":c(n))&&(n={default:parseInt(n)||2});var t=1/0,i=n.default||2;for(var r in n){var a=parseInt(r);a>0&&e<=a&&a<t&&(t=a,i=n[r])}i=Math.max(1,parseInt(i)||1),this.state.columnCount!==i&&this.setState({columnCount:i})}},{key:"itemsInColumns",value:function(){for(var e=this.state.columnCount,n=new Array(e),t=[].concat(this.props.children||[]),i=0;i<t.length;i++){var r=i%e;n[r]||(n[r]=[]),n[r].push(t[i])}return n}},{key:"renderColumns",value:function(){var e=this.props,n=e.column,t=e.columnAttrs,i=void 0===t?{}:t,c=e.columnClassName,a=this.itemsInColumns(),o=100/a.length+"%",s=c;"string"!==typeof s&&(this.logDeprecated('The property "columnClassName" requires a string'),"undefined"===typeof s&&(s="my-masonry-grid_column"));var u=r({},n,i,{style:r({},i.style,{width:o}),className:s});return a.map((function(e,n){return l.default.createElement("div",r({},u,{key:n}),e)}))}},{key:"logDeprecated",value:function(e){console.error("[Masonry]",e)}},{key:"render",value:function(){var e=this.props,n=(e.children,e.breakpointCols,e.columnClassName,e.columnAttrs,e.column,e.className),t=function(e,n){var t={};for(var i in e)n.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),i=n;return"string"!==typeof n&&(this.logDeprecated('The property "className" requires a string'),"undefined"===typeof n&&(i="my-masonry-grid")),l.default.createElement("div",r({},t,{className:i}),this.renderColumns())}}]),n}(l.default.Component);u.defaultProps=s,n.default=u},456:function(e,n,t){},457:function(e,n,t){},465:function(e,n,t){"use strict";t.r(n);var i=t(66),r=t(1),c=t(26),a=t(67),o=t(146),l=t(40),s=t.n(l),u=t(68),d=function(){var e=Object(u.a)(s.a.mark((function e(n,t){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),window.confirm("Are you sure you want to permanently delete this recipe?")&&(i=n.target.value,t.doc(i).delete().then((function(){Object(o.a)("","Deleted","danger")})).catch((function(e){console.log("error removing document",e)})));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),f=t(452),b=t(445),p=(t(457),t(2)),m=function(e){var n=e.searchField,t=e.searchChange;return Object(p.jsx)("div",{className:"searchbox",children:Object(p.jsx)(b.a,{type:"search",label:"Search Recipes",onChange:t,value:n})})},j=t(145),h=t(53),v=t(444),O=t(448);var g=function(){var e=Object(r.useState)([{ingredient:"",ingredientRef:null}]),n=Object(i.a)(e,2),t=n[0],l=n[1],s=Object(r.useState)({name:"",link:"",ingredients:[]}),u=Object(i.a)(s,2),d=u[0],f=u[1],m=Object(r.useState)(!1),g=Object(i.a)(m,2),C=g[0],y=g[1],x=Object(r.useState)(!1),k=Object(i.a)(x,2),N=k[0],w=k[1],R=Object(a.useFirestore)(),A=Object(c.b)((function(e){return e.firebase.auth})).uid,S=function(e){var n=e.target,t=n.name,i=n.value;f(Object(h.a)(Object(h.a)({},d),{},Object(j.a)({},t,i)))};return Object(r.useEffect)((function(){var e=t.map((function(e,n){return e.ingredient.toLowerCase()})).filter(Boolean);f(Object(h.a)(Object(h.a)({},d),{},{ingredients:e}))}),[t]),N?Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("h3",{className:"new-recipe-title",children:"Add a new recipe"}),Object(p.jsx)(b.a,{name:"name",label:"Recipe Name",handleChange:S,value:d.name,required:!0}),C?Object(p.jsx)("div",{className:"error",children:"Recipe name Required"}):null,Object(p.jsx)(b.a,{name:"link",label:"Link",handleChange:S,value:d.link}),Object(p.jsx)(O.a,{inputList:t,setInputList:l,label:"Ingredient"}),Object(p.jsxs)("div",{className:"new-recipe-button-group",children:[Object(p.jsx)(v.a,{value:"AddRecipe",onClick:function(e){e.preventDefault(),d.name?(R.collection("users").doc(A).collection("recipes").add(d).then((function(e){e.update({id:e.id})})),Object(o.a)(d.name,"Added to Recipes","success"),f({name:"",link:"",ingredients:[]}),l([{ingredient:"",ingredientRef:null}]),y(!1),w(!N)):y(!0)},children:"Add Recipe"}),Object(p.jsx)(v.a,{value:"Cancel",onClick:function(){w(!1),y(!1)},children:"Cancel"})]})]}):Object(p.jsx)("div",{style:{margin:"0 5%"},children:Object(p.jsx)(v.a,{value:"newRecipe",onClick:function(){w(!N)},children:"Add a Recipe"})})},C=function(e){var n=e.editingRecipe,t=e.setEditingRecipe,c=e.updateRecipe,a=Object(r.useState)([{ingredient:"",ingredientRef:null}]),o=Object(i.a)(a,2),l=o[0],s=o[1];Object(r.useEffect)((function(){t((function(e){return Object(h.a)(Object(h.a)({},e),{},{ingredients:l.map((function(e){return e.ingredient})).filter(Boolean)})}))}),[l]),Object(r.useEffect)((function(){var e=[];if(!n.id)return[{ingredient:"",ingredientRef:null}];e=n.ingredients.map((function(e){return{ingredient:e,ingredientRef:null}})),s(e)}),[n.ingredients.length]);var u=function(e){t((function(n){return Object(h.a)(Object(h.a)({},n),{},Object(j.a)({},e.target.name,e.target.value))}))};return n.id?Object(p.jsxs)("article",{className:"card",children:[Object(p.jsx)("h2",{children:"Edit Recipe"}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)(b.a,{name:"name",label:"Recipe Name",handleChange:u,value:n.name,autoComplete:"off"}),Object(p.jsx)(b.a,{name:"link",label:"Link",handleChange:u,value:n.link,autoComplete:"off"}),Object(p.jsx)(O.a,{inputList:l,setInputList:s})]}),Object(p.jsx)(v.a,{value:"editRecipe",onClick:c,children:"Done"})]}):null},y=function(e,n){var t=Object(r.useState)(e),c=Object(i.a)(t,2),a=c[0],o=c[1];return Object(r.useEffect)((function(){var t=setTimeout((function(){o(e)}),n);return function(){clearTimeout(t)}}),[e]),a};n.default=function(){var e=Object(r.useState)({id:"",name:"",link:"",ingredients:[]}),n=Object(i.a)(e,2),t=n[0],l=n[1],s=Object(r.useState)(""),u=Object(i.a)(s,2),b=u[0],j=u[1],h=y(b,200),v=Object(a.useFirestore)(),O=Object(c.b)((function(e){return e.firebase.auth})).uid,x=Object(c.b)((function(e){return e.firestore.ordered.recipes})),k=Object(c.b)((function(e){return e.firestore.status.requesting.recipes})),N=Object(c.b)((function(e){return e.firestore.status.requested.recipes}));Object(a.useFirestoreConnect)({collection:"users/".concat(O,"/recipes"),storeAs:"recipes"});var w=v.collection("users").doc(O).collection("shoppingList"),R=v.collection("users").doc(O).collection("recipes"),A=function(e){var n=[];return e&&(n=e.filter((function(e){if(e.name)return e.name.toLowerCase().includes(h.toLowerCase())}))),n};return Object(r.useEffect)((function(){j("")}),[x]),Object(p.jsxs)("div",{className:"page fade-in",children:[Object(p.jsxs)("div",{className:"page-header",children:[Object(p.jsx)("h2",{className:"title",children:"Recipe List"}),Object(p.jsx)(C,{editingRecipe:t,setEditingRecipe:l,updateRecipe:function(e){var n,i;n=t,i=R,e.preventDefault(),i.doc(n.id).update(n).then(Object(o.a)(n.name,"edited","info")).then(l({id:"",name:"",link:"",ingredients:[]})).catch((function(e){Object(o.a)("ERROR","error updating recipe","info"),console.log("error updating recipe",e)}))}}),Object(p.jsx)(g,{}),Object(p.jsx)(m,{searchChange:function(e){j(e.target.value)},searchField:b})]}),!k&&N&&A.length?Object(p.jsx)(f.a,{recipes:A(x),removeFromRecipes:function(e){d(e,R)},cardButton:function(e){!function(e,n,t){e.preventDefault();var i=e.target.value;n.forEach((function(e){e.id&&e.id===i&&(t.add(e).then((function(e){e.update({id:e.id})})),Object(o.a)(e.name,"Added to your shopping list","success"))})),j("")}(e,x,w)},editRecipeCardButton:function(e){!function(e,n){e.preventDefault();var t=n.find((function(n){return n.id===e.target.value}));l(t)}(e,x)}}):b?Object(p.jsx)("div",{className:"card",children:Object(p.jsx)("h2",{children:"Recipe not found."})}):Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("h2",{children:"No recipes in your recipe list."}),Object(p.jsx)("h2",{children:"Go to Add a recipe to add some!"})]})]})}}}]);
//# sourceMappingURL=3.867c7bb2.chunk.js.map