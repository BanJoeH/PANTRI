(this["webpackJsonprecipeshoppinglist2.0"]=this["webpackJsonprecipeshoppinglist2.0"]||[]).push([[3,5],{444:function(e,n,t){"use strict";t(1),t(446);var i=t(2);n.a=function(e){var n=e.onClick,t=e.isGoogleSignIn,r=e.value,c=e.children;return Object(i.jsx)("button",{className:"".concat(t?"google-sign-in":""," custom-button"),onClick:n,value:r,children:c})}},445:function(e,n,t){"use strict";var i=t(53);function r(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},c=Object.keys(e);for(i=0;i<c.length;i++)t=c[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(i=0;i<c.length;i++)t=c[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}t(1),t(447);var c=t(2);n.a=function(e){var n=e.handleChange,t=e.label,a=r(e,["handleChange","label"]);return Object(c.jsxs)("div",{className:"group",children:[Object(c.jsx)("input",Object(i.a)(Object(i.a)({onChange:n},a),{},{className:"form-input"})),t?Object(c.jsx)("label",{className:"".concat(a.value.length?"shrink":""," form-input-label"),children:t}):null]})}},446:function(e,n,t){},447:function(e,n,t){},448:function(e,n,t){"use strict";var i=t(449),r=t(1),c=(t(450),t(2));n.a=function(e){var n=e.inputList,t=e.setInputList,a=e.lossOfFocus,o=e.label,l=void 0===o?"Ingredient":o,u=function(){t([].concat(Object(i.a)(n),[{ingredient:"",ingredientRef:null}]))};return Object(r.useEffect)((function(){n[n.length-1].ingredientRef&&n[n.length-1].ingredientRef.focus()}),[n.length]),n.map((function(e,r){return Object(c.jsxs)("div",{className:"ingredient-input-group",children:[Object(c.jsxs)("div",{className:"group",children:[Object(c.jsx)("input",{id:e.ingredient+r,name:"ingredient",label:l,onChange:function(e){return function(e,r){var c=e.target,a=c.name,o=c.value,l=Object(i.a)(n);l[r][a]=o,t(l)}(e,r)},value:e.ingredient,onKeyDown:function(e){"Enter"===e.key&&u()},ref:function(n){return e.ingredientRef=n},autoComplete:"off",className:"form-input",onBlur:a}),Object(c.jsx)("label",{htmlFor:e.ingredient+r,className:"".concat(e.ingredient.length?"shrink":""," form-input-label"),children:l})]}),Object(c.jsxs)("div",{className:"button-group",children:[n.length-1===r&&Object(c.jsx)("div",{className:"ingredient-button",children:Object(c.jsx)("button",{onClick:u,className:"add",children:"\u2715"})}),1!==n.length&&Object(c.jsx)("button",{onClick:function(){return function(e){var r=Object(i.a)(n);r.splice(e,1),t(r)}(r)},className:"ingredient-button delete",children:"\u2715"})]})]},r)}))}},449:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var i=t(95);var r=t(147);function c(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},450:function(e,n,t){},451:function(e,n,t){"use strict";var i=t(66),r=t(1),c=(t(453),t(2)),a=function(e){var n=e.recipeId,t=e.ingredients,i=e.pathname,r=e.ingredientButton;return t?Object(c.jsx)("div",{className:"ingredient-list",children:t.map((function(e,t){return null!==e?Object(c.jsxs)("div",{className:"ingredient",children:[Object(c.jsx)("div",{htmlFor:e,className:"ingredient-text",children:e}),"/PANTRI/shoppingList"===i?Object(c.jsx)("button",{className:"ingredient-button",onClick:r,name:n+"&"+e+"&"+t,children:"\u2715"}):Object(c.jsx)("div",{})]},n+e+t):null}))}):null},o=(t(454),t(444));n.a=function(e){var n=e.recipe,t=e.button,l=e.ingredientButton,u=e.removeFromRecipes,s=e.editRecipe,d=Object(r.useState)(!1),f=Object(i.a)(d,2),p=f[0],b=f[1],m=window.location.pathname;return Object(c.jsxs)("article",{className:"card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("h2",{className:"card-title",onClick:function(e){e.preventDefault(),b((function(e){return!e}))},children:n.name}),Object(c.jsxs)("div",{className:"card-header-buttons",children:[n.link?Object(c.jsx)("a",{className:"title-link",target:"_blank",rel:"noopener noreferrer",href:n.link,children:"Link"}):null,"/PANTRI/recipes"===m?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{value:n.id,onClick:t,className:"rotate title-link",children:"\u2715"}),Object(c.jsx)("button",{value:n.id,onClick:s,className:"title-link",children:"Edit"})]}):null,Object(c.jsx)("button",{href:"#",value:n.id,onClick:function(e){return u(e)},className:" title-link",children:"\u2715"})]})]}),p?Object(c.jsxs)("div",{className:"card-body fade-in",children:[n.ingredients.length?Object(c.jsx)(a,{recipeId:n.id,ingredients:n.ingredients,pathname:m,ingredientButton:l}):Object(c.jsx)("div",{children:"No ingredients"}),Object(c.jsx)(o.a,{onClick:t,value:n.id,children:"/PANTRI/shoppingList"===m?"Done":"Add to Shopping List"})]}):null]})}},452:function(e,n,t){"use strict";var i=t(1),r=t.n(i),c=t(451),a=t(455),o=t.n(a),l=(t(456),t(2));function u(e){var n=e.recipes,t=e.removeFromRecipes,i=e.cardButton,r=e.editRecipeCardButton,a=e.ingredientButton,u={default:n.length<3?n.length:3,1400:2,1e3:1};return Object(l.jsx)("div",{className:"card-list fade-in",children:Object(l.jsx)(o.a,{breakpointCols:u,className:"masonry-grid",columnClassName:"masonry-grid_column",children:n.map((function(e){return null!==e?Object(l.jsx)(c.a,{removeFromRecipes:t,recipe:e,button:i,editRecipe:r,ingredientButton:a},e.id):null}))})})}n.a=r.a.memo(u)},453:function(e,n,t){},454:function(e,n,t){},455:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i,r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),o=t(1),l=(i=o)&&i.__esModule?i:{default:i};var u={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},s=function(e){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.reCalculateColumnCount=t.reCalculateColumnCount.bind(t),t.reCalculateColumnCountDebounce=t.reCalculateColumnCountDebounce.bind(t);var i=void 0;return i=t.props.breakpointCols&&t.props.breakpointCols.default?t.props.breakpointCols.default:parseInt(t.props.breakpointCols)||2,t.state={columnCount:i},t}return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),a(n,[{key:"componentDidMount",value:function(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}},{key:"componentDidUpdate",value:function(){this.reCalculateColumnCount()}},{key:"componentWillUnmount",value:function(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}},{key:"reCalculateColumnCountDebounce",value:function(){var e=this;window&&window.requestAnimationFrame?(window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame((function(){e.reCalculateColumnCount()}))):this.reCalculateColumnCount()}},{key:"reCalculateColumnCount",value:function(){var e=window&&window.innerWidth||1/0,n=this.props.breakpointCols;"object"!==("undefined"===typeof n?"undefined":c(n))&&(n={default:parseInt(n)||2});var t=1/0,i=n.default||2;for(var r in n){var a=parseInt(r);a>0&&e<=a&&a<t&&(t=a,i=n[r])}i=Math.max(1,parseInt(i)||1),this.state.columnCount!==i&&this.setState({columnCount:i})}},{key:"itemsInColumns",value:function(){for(var e=this.state.columnCount,n=new Array(e),t=[].concat(this.props.children||[]),i=0;i<t.length;i++){var r=i%e;n[r]||(n[r]=[]),n[r].push(t[i])}return n}},{key:"renderColumns",value:function(){var e=this.props,n=e.column,t=e.columnAttrs,i=void 0===t?{}:t,c=e.columnClassName,a=this.itemsInColumns(),o=100/a.length+"%",u=c;"string"!==typeof u&&(this.logDeprecated('The property "columnClassName" requires a string'),"undefined"===typeof u&&(u="my-masonry-grid_column"));var s=r({},n,i,{style:r({},i.style,{width:o}),className:u});return a.map((function(e,n){return l.default.createElement("div",r({},s,{key:n}),e)}))}},{key:"logDeprecated",value:function(e){console.error("[Masonry]",e)}},{key:"render",value:function(){var e=this.props,n=(e.children,e.breakpointCols,e.columnClassName,e.columnAttrs,e.column,e.className),t=function(e,n){var t={};for(var i in e)n.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),i=n;return"string"!==typeof n&&(this.logDeprecated('The property "className" requires a string'),"undefined"===typeof n&&(i="my-masonry-grid")),l.default.createElement("div",r({},t,{className:i}),this.renderColumns())}}]),n}(l.default.Component);s.defaultProps=u,n.default=s},456:function(e,n,t){},457:function(e,n,t){"use strict";t.r(n);var i=t(145),r=t(53),c=t(66),a=t(1),o=t(67),l=t(30),u=t(146),s=t(444),d=t(448),f=t(445),p=t(2);n.default=function(){var e=Object(a.useState)([{ingredient:"",ingredientRef:null}]),n=Object(c.a)(e,2),t=n[0],b=n[1],m=Object(a.useState)({name:"",link:"",ingredients:[]}),j=Object(c.a)(m,2),h=j[0],v=j[1],O=Object(a.useState)(!1),g=Object(c.a)(O,2),C=g[0],y=g[1],x=Object(a.useState)(!1),k=Object(c.a)(x,2),N=k[0],w=k[1],R=Object(o.useFirestore)(),A=Object(l.b)((function(e){return e.firebase.auth})).uid,S=function(e){var n=e.target,t=n.name,c=n.value;v(Object(r.a)(Object(r.a)({},h),{},Object(i.a)({},t,c)))};return Object(a.useEffect)((function(){var e=t.map((function(e,n){return e.ingredient.toLowerCase()})).filter(Boolean);v(Object(r.a)(Object(r.a)({},h),{},{ingredients:e}))}),[t]),N?Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("h3",{className:"new-recipe-title",children:"Add a new recipe"}),Object(p.jsx)(f.a,{name:"name",label:"Recipe Name",handleChange:S,value:h.name,required:!0}),C?Object(p.jsx)("div",{className:"error",children:"Recipe name Required"}):null,Object(p.jsx)(f.a,{name:"link",label:"Link",handleChange:S,value:h.link}),Object(p.jsx)(d.a,{inputList:t,setInputList:b,label:"Ingredient"}),Object(p.jsxs)("div",{className:"new-recipe-button-group",children:[Object(p.jsx)(s.a,{value:"AddRecipe",onClick:function(e){e.preventDefault(),h.name?(R.collection("users").doc(A).collection("recipes").add(h).then((function(e){e.update({id:e.id})})),Object(u.a)(h.name,"Added to Recipes","success"),v({name:"",link:"",ingredients:[]}),b([{ingredient:"",ingredientRef:null}]),y(!1),w(!N)):y(!0)},children:"Add Recipe"}),Object(p.jsx)(s.a,{value:"Cancel",onClick:function(){w(!1),y(!1)},children:"Cancel"})]})]}):Object(p.jsx)(s.a,{value:"newRecipe",onClick:function(){w(!N)},children:"Add a Recipe"})}},458:function(e,n,t){},466:function(e,n,t){"use strict";t.r(n);var i=t(40),r=t.n(i),c=t(68),a=t(66),o=t(1),l=t(30),u=t(67),s=t(146),d=t(452),f=t(445),p=(t(458),t(2)),b=function(e){var n=e.searchField,t=e.searchChange;return Object(p.jsx)("div",{className:"searchbox",children:Object(p.jsx)(f.a,{type:"search",label:"Search Recipes",onChange:t,value:n})})},m=t(457),j=t(145),h=t(53),v=t(444),O=t(448),g=function(e){var n=e.editingRecipe,t=e.setEditingRecipe,i=e.updateRecipe,r=Object(o.useState)([{ingredient:"",ingredientRef:null}]),c=Object(a.a)(r,2),l=c[0],u=c[1];Object(o.useEffect)((function(){t((function(e){return Object(h.a)(Object(h.a)({},e),{},{ingredients:l.map((function(e){return e.ingredient})).filter(Boolean)})}))}),[l]),Object(o.useEffect)((function(){var e=[];if(!n.id)return[{ingredient:"",ingredientRef:null}];e=n.ingredients.map((function(e){return{ingredient:e,ingredientRef:null}})),u(e)}),[n.ingredients.length]);var s=function(e){t((function(n){return Object(h.a)(Object(h.a)({},n),{},Object(j.a)({},e.target.name,e.target.value))}))};return n.id?Object(p.jsxs)("article",{className:"card",children:[Object(p.jsx)("h2",{children:"Edit Recipe"}),Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)(f.a,{name:"name",label:"Recipe Name",handleChange:s,value:n.name,autoComplete:"off"}),Object(p.jsx)(f.a,{name:"link",label:"Link",handleChange:s,value:n.link,autoComplete:"off"}),Object(p.jsx)(O.a,{inputList:l,setInputList:u})]}),Object(p.jsx)(v.a,{value:"editRecipe",onClick:i,children:"Done"})]}):null},C=function(e,n){var t=Object(o.useState)(e),i=Object(a.a)(t,2),r=i[0],c=i[1];return Object(o.useEffect)((function(){var t=setTimeout((function(){c(e)}),n);return function(){clearTimeout(t)}}),[e]),r};n.default=function(){var e,n=Object(o.useState)({id:"",name:"",link:"",ingredients:[]}),t=Object(a.a)(n,2),i=t[0],f=t[1],j=Object(o.useState)(""),h=Object(a.a)(j,2),v=h[0],O=h[1],y=C(v,200),x=Object(u.useFirestore)(),k=Object(l.b)((function(e){return e.firebase.auth})).uid,N=Object(l.b)((function(e){return e.firestore.ordered.recipes}));Object(u.useFirestoreConnect)({collection:"users/".concat(k,"/recipes"),storeAs:"recipes"});var w=x.collection("users").doc(k).collection("shoppingList"),R=x.collection("users").doc(k).collection("recipes"),A=[];(null===N||void 0===N?void 0:N.length)&&(A=N.filter((function(e){if(null===e||void 0===e?void 0:e.name)return e.name.toLowerCase().includes(y.toLowerCase())})));var S=function(){var e=Object(c.a)(r.a.mark((function e(n){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),window.confirm("Are you sure you want to permanently delete this recipe?")&&(t=n.target.value,R.doc(t).delete().then((function(){Object(s.a)("","Deleted","danger")})).catch((function(e){console.log("error removing document",e)})),O(""));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"page fade-in",children:[Object(p.jsxs)("div",{className:"page-header",children:[Object(p.jsx)("h2",{className:"title",children:"Recipe List"}),Object(p.jsx)(g,{editingRecipe:i,setEditingRecipe:f,updateRecipe:function(e){e.preventDefault(),R.doc(i.id).update(i).then(Object(s.a)(i.name,"edited","info")).then(f({id:"",name:"",link:"",ingredients:[]})).catch((function(e){Object(s.a)("ERROR","error updating recipe","info"),console.log("error updating recipe",e)}))}}),Object(p.jsx)(m.default,{}),Object(p.jsx)(b,{searchChange:function(e){O(e.target.value)},searchField:v})]}),(null===(e=A)||void 0===e?void 0:e.length)?Object(p.jsx)(d.a,{recipes:A,removeFromRecipes:S,cardButton:function(e){e.preventDefault();var n=e.target.value;N.forEach((function(e){null!==e.id&&e.id===n&&(w.add(e).then((function(e){e.update({id:e.id})})),Object(s.a)(e.name,"Added to your shopping list","success"))})),O("")},editRecipeCardButton:function(e){e.preventDefault();var n=N.find((function(n){return n.id===e.target.value}));f(n)}}):v.length?Object(p.jsx)("div",{className:"card",children:Object(p.jsx)("h2",{children:"Recipe not found."})}):Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("h2",{children:"No recipes in your recipe list."}),Object(p.jsx)("h2",{children:"Go to Add a recipe to add some!"})]})]})}}}]);
//# sourceMappingURL=3.c3fb4f24.chunk.js.map